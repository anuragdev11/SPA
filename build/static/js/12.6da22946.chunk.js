(this.webpackJsonpreports=this.webpackJsonpreports||[]).push([[12],{103:function(e,t,a){e.exports=a.p+"static/media/ledger.8133cf72.svg"},104:function(e,t,a){e.exports=a.p+"static/media/history.be0cae18.svg"},105:function(e,t,a){e.exports=a.p+"static/media/OldPulseLoader.b788bb75.svg"},297:function(e,t,a){},481:function(e,t,a){"use strict";a.r(t);var n=a(100),s=a(71),o=a.n(s),r=a(72),i=a(6),l=a(7),c=a(10),p=a(9),u=a(8),d=a(55),h=a(0),m=a.n(h),g=a(73),f=a.n(g),y=a(36),b=a(524),w=a(494),E=a(495),v=a(496),x=a(497),S=a(501),k=a(488),O=a(128),C=a.n(O),T=a(498),D=a(62),j=a(518),P=a(491),N=a(504),A=a(503),M=a(515),B=a(502),G=a(90),R=a.n(G),I=(a(91),a(80)),L=a(130),K=a.n(L),Y=a(131),_=a.n(Y),W=a(103),q=a.n(W),H=a(104),z=a.n(H),F=a(105),X=a.n(F),V=a(129),J=a.n(V),Q=a(3),U=(a(297),function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleGroupChange=function(){n.setState({myGroupChecked:!n.state.myGroupChecked}),Object(Q.a)("MyGroup")},n.handleDottedGroupChange=function(){n.setState({myDottedGroupChecked:!n.state.myDottedGroupChecked}),Object(Q.a)("MyDottedGroup")},n.handleAssignChange=function(e){n.setState({assignType:e.target.value}),"1"===e.target.value?Object(Q.a)("SalesAssignedTo"):Object(Q.a)("TeleAssignedTo")},n.handleReportChange=function(e){n.setState({reportType:e.target.value}),"3"===e.target.value?Object(Q.a)("SegmentationReport"):Object(Q.a)("RenewalReport")},n.handleDrawerOpen=function(){n.state.open&&Object(Q.a)("DrawerClose"),n.setState({open:!n.state.open})},n.showReportHandler=function(){n.setState({showReport:!0})},n.state={open:!1,showReport:!1,showFilters:!1,showTable:!1,tableData:[],showProgress:!1,data:{},count:0,activePage:0,pageStart:1,assignType:"1",reportType:"3",myGroupChecked:!0,myDottedGroupChecked:!1,employeeId:"",exportEnable:!0},n.showReportHandler=n.showReportHandler.bind(Object(c.a)(n)),n.paging=n.paging.bind(Object(c.a)(n)),n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){document.title="Segmentation Report"}},{key:"componentDidMount",value:function(){this.setState({open:!0,employeeId:this.props.employeeid}),R.a.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}},{key:"showTable",value:function(){var e=Object(r.a)(o.a.mark((function e(){var t,a,n,s,r,i,l,c,p,u,d,h,g,f,y,b,w,E,v,x,S;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({exportEnable:!0}),t=document.getElementById("SalesAssign"),a=document.getElementById("TeleAssign"),n=document.getElementById("employee"),s=document.getElementById("SegmentReport"),r=document.getElementById("RenewalReport"),i=document.getElementById("MyGroup"),l=!1,i.checked&&(l=!0),c=document.getElementById("MyDottedGroup"),p=!1,c.checked&&(p=!0),u=1,u=s.checked?1:2,d="",d=t.checked?"Sale":"CC",h=n.value.substr(n.value.lastIndexOf("-")+2,n.value.length-1),this.setState({employeeId:h}),t.checked||a.checked){e.next=22;break}R.a.warning("Please select Assigned To"),e.next=54;break;case 22:if(""!==n.value){e.next=26;break}R.a.warning("Assignee Name Cannot be blank"),e.next=54;break;case 26:if(s.checked||r.checked){e.next=31;break}R.a.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},R.a.warning("Please select Report Type"),e.next=54;break;case 31:return g=!1,f=this.props.employeeid,y=this.props.AK,b={},this.setState({showProgress:!0,showTable:!1,open:!1,pageStart:1,activePage:0}),e.next=38,fetch("https://merp.intermesh.net/go/report/v1/segmentation?empid="+f+"&renewal="+u+"&isMyDottedGroup="+p+"&searchtype="+d+"&start=1&isMyGroup="+l+"&end=11&requestfrom=WEBERP&assignedTo="+h+"&AK="+y+"&isExport=0",{method:"POST",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){500===e.status?(R.a.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},R.a.error(e.message)):(R.a.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},R.a.success(e.message),204!==e.status&&(b=e))})).catch((function(e){return console.log("Error")}));case 38:if(!b.data){e.next=52;break}return w=[],E=b.data.count,v=[],v=b.data.segmentationData?b.data.segmentationData:b.data.renewalData,Object.keys(v[0]).map((function(e){if("COMPANYID"!==e){var t={label:e,field:e,width:100};w.push(t)}})),w.push({label:"Action",field:"Action"}),x=[],v.map((function(e){var t={};Object.keys(e).map((function(a){"COMPANYID"===a?t.Action=[m.a.createElement("div",{className:"d-flex"},m.a.createElement("img",{src:q.a,style:{width:"20px",height:"20px",cursor:"pointer",marginRight:"10px"},title:"Client Ledger",onClick:function(){window.open("http://weberp.intermesh.net/STS/STSDetpopup.aspx?comp_id="+e[a]+"&ISCL=1","_blank","toolbar=no,location=0,directories=no,status=no,menubar=no,titlebar=no,scrollbars=yes,resizable=no,copyhistory=no,width=905,height=565,left=300,top=200,screenX=150,screenY=100")}}),m.a.createElement("img",{src:z.a,style:{width:"20px",height:"20px",cursor:"pointer"},title:"STS",onClick:function(){window.open("http://weberp.intermesh.net/STS/STSDetpopup.aspx?comp_id="+e[a],"_blank","toolbar=no,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no,width=905,height=565,left=150,top=100,screenX=150,screenY=100")}}))]:t[a]=null===e[a]||""===e[a]?"N/A":e[a]})),x.push(t)})),S={columns:w,rows:x},e.next=50,this.setState({showProgress:g,showTable:!0,tableData:b.data.segmentationData,data:S,count:E,exportEnable:!1});case 50:e.next=54;break;case 52:return e.next=54,this.setState({showProgress:g,open:!0,exportEnable:!0});case 54:Object(Q.a)("Search");case 55:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportToExcel",value:function(){var e=Object(r.a)(o.a.mark((function e(){var t,a,n,s,r,i,l,c,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.employeeId,a=this.state.assignType,n=this.state.reportType-2,s=this.state.myGroupChecked,r=this.state.myDottedGroupChecked,i="",i="1"===a?"Sale":"CC",l=!1,c=this.props.employeeid,p=this.props.AK,{},this.setState({showProgress:!0,showTable:!1,open:!1,pageStart:1,activePage:0}),e.next=14,fetch("https://merp.intermesh.net/go/report/v1/segmentation?empid="+c+"&renewal="+n+"&isMyDottedGroup="+r+"&searchtype="+i+"&start=1&isMyGroup="+s+"&end=11&requestfrom=WEBERP&assignedTo="+t+"&AK="+p+"&isExport=1",{method:"POST",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){500===e.status?R.a.error("Some error occurred! Please try again later"):R.a.success("Your request has been successfully queued. You will receive an email shortly.")})).catch((function(e){return console.log("Error")}));case 14:return e.next=16,this.setState({showProgress:l,open:!0,showTable:!1});case 16:Object(Q.a)("Export");case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"paging",value:function(){var e=Object(r.a)(o.a.mark((function e(t){var a,n,s,r,i,l,c,p,u,d,h,g,f,y,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.employeeId,n=this.state.assignType,s=this.state.reportType-2,r=this.state.myGroupChecked,i=this.state.myDottedGroupChecked,l="",l="1"===n?"Sale":"CC",c=!1,p=this.props.employeeid,u=this.props.AK,d={},this.setState({showProgress:!0,open:!1}),e.next=14,fetch("https://merp.intermesh.net/go/report/v1/segmentation?empid="+p+"&renewal="+s+"&isMyDottedGroup="+i+"&searchtype="+l+"&start="+t+"&isMyGroup="+r+"&end="+(t+10)+"&requestfrom=WEBERP&assignedTo="+a+"&AK="+u+"&isExport=0",{method:"POST",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){500===e.status?(R.a.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},R.a.error(e.message)):204!==e.status&&(d=e,console.log(d))})).catch((function(e){R.a.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},R.a.error("Some error occurred please try again!")}));case 14:if(!d.data){e.next=30;break}return this.setState({activePage:Math.floor(t/10),pageStart:t}),h=[],g=d.data.count,f=[],f=d.data.segmentationData?d.data.segmentationData:d.data.renewalData,Object.keys(f[0]).map((function(e){if("COMPANYID"!==e){var t={label:e,field:e,width:100};h.push(t)}})),h.push({label:"Action",field:"Action"}),y=[],f.map((function(e){var t={};Object.keys(e).map((function(a){"COMPANYID"===a?t.Action=[m.a.createElement("div",{className:"d-flex"},m.a.createElement("img",{src:q.a,style:{width:"20px",height:"20px",cursor:"pointer",marginRight:"10px"},title:"Client Ledger",onClick:function(){window.open("http://weberp.intermesh.net/STS/STSDetpopup.aspx?comp_id="+e[a]+"&ISCL=1","_blank","toolbar=no,location=0,directories=no,status=no,menubar=no,titlebar=no,scrollbars=yes,resizable=no,copyhistory=no,width=905,height=565,left=300,top=200,screenX=150,screenY=100")}}),m.a.createElement("img",{src:z.a,style:{width:"20px",height:"20px",cursor:"pointer"},title:"STS",onClick:function(){window.open("http://weberp.intermesh.net/STS/STSDetpopup.aspx?comp_id="+e[a],"_blank","toolbar=no,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no,width=905,height=565,left=150,top=100,screenX=150,screenY=100")}}))]:t[a]=null===e[a]||""===e[a]?"N/A":e[a]})),y.push(t)})),b={columns:h,rows:y},e.next=27,this.setState({showProgress:c,showTable:!0,data:b,count:g});case 27:console.log(b),e.next=32;break;case 30:return e.next=32,this.setState({showProgress:c,open:!0});case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,s=this.state.open;return m.a.createElement("div",{className:t.root},m.a.createElement(w.a,null),m.a.createElement(E.a,{position:"fixed",className:f()(t.appBar,Object(n.a)({},t.appBarShift,s))},m.a.createElement(v.a,{disableGutters:!s},m.a.createElement(k.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:f()(t.menuButton)},this.state.open?"":m.a.createElement(C.a,null))),this.state.open?"":m.a.createElement("div",{className:"d-flex align-items-center h-100",style:{backgroundColor:"#00A699",padding:"10px",position:"absolute",left:"50px"}},m.a.createElement(x.a,{variant:"h6"},"Segmentation Report")),m.a.createElement(T.a,{disabled:this.state.exportEnable,variant:"contained",className:"export",style:{width:"110px",position:"absolute",right:"20px",top:"10px"},color:"primary",onClick:this.exportToExcel.bind(this)},"Export",m.a.createElement(J.a,null))),m.a.createElement(b.a,{className:t.drawer,variant:"persistent",anchor:"left",open:s,classes:{paper:t.drawerPaper}},m.a.createElement("div",{className:"d-flex justify-content-between"},m.a.createElement(x.a,{variant:"h6",className:[t.textColor,t.typefont,"px-3 mt-2"]},"Group Type"),m.a.createElement(k.a,{onClick:this.handleDrawerOpen},"ltr"===a.direction?m.a.createElement(K.a,null):m.a.createElement(_.a,null))),m.a.createElement(S.a,null),m.a.createElement(B.a,{row:!0,className:"mx-3"},m.a.createElement(A.a,{control:m.a.createElement(j.a,{id:"MyGroup",value:"checkedB",color:"primary",checked:this.state.myGroupChecked,onChange:this.handleGroupChange}),label:"My Group"}),m.a.createElement(A.a,{control:m.a.createElement(j.a,{id:"MyDottedGroup",value:"checkedB",color:"primary",checked:this.state.myDottedGroupChecked,onChange:this.handleDottedGroupChange}),label:"My Dotted Group"})),m.a.createElement(D.a,{label:"Search Employee*",id:"employee",search:"employee",className:"mx-3",defaultValue:this.props.employeename+" - "+this.props.employeeid,employeeid:this.props.employeeid,AK:this.props.AK,menuid:102,fnsid:227}),m.a.createElement(x.a,{variant:"h6",className:[t.textColor,t.typefont,"px-3 mt-4"]},"Assigned To",m.a.createElement("span",{style:{color:"red"}},"*")),m.a.createElement(S.a,null),m.a.createElement(P.a,{component:"fieldset",className:"mx-3"},m.a.createElement(N.a,{"aria-label":"gender",value:this.state.assignType,onChange:this.handleAssignChange},m.a.createElement(A.a,{value:"1",control:m.a.createElement(M.a,{id:"SalesAssign",color:"primary"}),label:"Sales Assigned To"}),m.a.createElement(A.a,{value:"2",control:m.a.createElement(M.a,{id:"TeleAssign",color:"primary"}),label:"Tele Assigned To"}))),m.a.createElement(x.a,{variant:"h6",className:[t.textColor,t.typefont,"px-3 mt-2"]},"Type",m.a.createElement("span",{style:{color:"red"}},"*")),m.a.createElement(S.a,null),m.a.createElement(P.a,{component:"fieldset",className:"mx-3"},m.a.createElement(N.a,{"aria-label":"gender",value:this.state.reportType,onChange:this.handleReportChange},m.a.createElement(A.a,{value:"3",control:m.a.createElement(M.a,{id:"SegmentReport",color:"primary"}),label:"Non-Renewal Segment"}),m.a.createElement(A.a,{value:"4",control:m.a.createElement(M.a,{id:"RenewalReport",color:"primary"}),label:"Renewal Segment"}))),m.a.createElement("div",{className:"d-flex justify-content-around mt-2"},m.a.createElement("button",{type:"button",style:{width:"200px"},onClick:this.showTable.bind(this),className:"btn btn-outline-success"},"Search"))),m.a.createElement("main",{className:f()(t.content),style:{marginTop:"45px"}},this.state.showProgress?m.a.createElement("div",{className:"mod d-flex justify-content-center align-items-center"},m.a.createElement("img",{src:X.a,className:"loader"})):"",this.state.showTable?m.a.createElement(I.a,{defaultPaging:!1,info:!1,data:this.state.data,count:this.state.count,paging:this.paging.bind(this),activePage:this.state.activePage,pageStart:this.state.pageStart}):""))}}]),a}(m.a.Component));t.default=Object(y.a)((function(e){return{textColor:{color:""},checkBox:{marginBottom:"0px!important"},root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(330,"px)"),marginLeft:330,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:0,marginRight:20},hide:{display:"none"},drawer:{width:330,flexShrink:0},typefont:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif;',fontWeight:"bold"},drawerPaper:{width:330},drawerHeader:Object(d.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"center"}),content:{flexGrow:1,padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-330},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}),{withTheme:!0})(U)},62:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(55),s=a(51),o=(a(84),a(0)),r=a.n(o),i=a(522),l=a(513);function c(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),o=a[0],c=a[1],p=r.a.useState([]),u=Object(s.a)(p,2),d=u[0],h=u[1],m=r.a.useState(!1),g=Object(s.a)(m,2),f=g[0],y=g[1],b=e.defaultValue;return r.a.useEffect((function(){o||(h([]),y(!1))}),[o]),r.a.createElement(l.a,{id:e.id,open:o,onOpen:function(){c(!0)},onClose:function(){c(!1)},className:e.className,getOptionSelected:function(e,t){return e===t},getOptionLabel:function(e){return e},options:d,defaultValue:b,loading:f,popupIcon:"",renderInput:function(t){return r.a.createElement(i.a,Object.assign({},t,{label:e.label,fullWidth:!0,style:e.style,variant:"outlined",onChange:function(t){var a;y(!0);var n=t.target.value,s=void 0===e.Mygroup?"1":e.Mygroup;if(""!==n){var o="https://weberp6.intermesh.net:444/userlist/assignto?keyword="+n+"&menuid="+e.menuid+"&fnsid="+e.fnsid+"&me="+s+"&empid="+e.employeeid+"&limit=1&AK="+e.AK;console.log(o),fetch(o).then((function(e){return e.json()})).then((function(e){a=e,Object.keys(a).length>0?h(Object.keys(a).map((function(e){return a[e]}))):y(!1)}))}},InputProps:Object(n.a)({},t.InputProps)}))}})}},80:function(e,t,a){"use strict";var n=a(0),s=a.n(n),o=a(68),r=a(492),i=a(493),l=function(e){var t=[],a=Math.floor(e.count/10)+(e.count%10>0?1:0);e.activePage+1===1?t.push(s.a.createElement(o.f,{disabled:!0},s.a.createElement(o.g,{className:"page-link",style:{borderRadius:"0"}},s.a.createElement("span",null,"First")))):t.push(s.a.createElement(o.f,{onClick:function(){return e.paging(1)}},s.a.createElement(o.g,{className:"page-link",style:{borderRadius:"0"}},s.a.createElement("span",null,"First"))));var n=1,r=n+4;r>a&&(r=a),e.activePage>=3&&(n=e.activePage-1,(r=n+4)>a&&(n=(r=a)-4)<1&&(n=1)),console.log(n+" "+r);for(var i=function(a){a===r+1?t.push(s.a.createElement(o.f,{style:{cursor:"default"}},s.a.createElement(o.g,null,"... ",s.a.createElement("span",{className:"sr-only"},"(current)")))):a===e.activePage+1?t.push(s.a.createElement(o.f,{active:!0,onClick:function(){return e.paging(10*(a-1)+1)}},s.a.createElement(o.g,{className:"page-link"},a))):t.push(s.a.createElement(o.f,{onClick:function(){return e.paging(10*(a-1)+1)}},s.a.createElement(o.g,{className:"page-link"},a)))},l=n;l<=r;l++)i(l);return e.activePage+1===a?t.push(s.a.createElement(o.f,{disabled:!0},s.a.createElement(o.g,{className:"page-link",style:{borderRadius:"0"}},s.a.createElement("span",null,"Last")))):t.push(s.a.createElement(o.f,{onClick:function(){return e.paging(10*(a-1)+1)}},s.a.createElement(o.g,{className:"page-link",style:{borderRadius:"0"}},s.a.createElement("span",null,"Last")))),s.a.createElement(o.k,{style:{cursor:"pointer"}},s.a.createElement(o.c,null,s.a.createElement(o.h,{circle:!0},t)))};t.a=function(e){return s.a.createElement(r.a,{style:e.style},s.a.createElement(i.a,{style:e.innerStyle},s.a.createElement(o.d,{id:e.id,striped:null===e.striped||e.striped,bordered:!0,responsive:e.responsive,hover:!0,className:e.className,data:e.data,searching:!1,info:e.info,noBottomColumns:!0,paging:e.defaultPaging,sortable:!1,style:e.style,entries:e.entries}),s.a.createElement("div",{className:"d-flex justify-content-between"},e.paging?s.a.createElement("div",{className:"pl-2"},"Showing entries ",e.pageStart," to ",e.pageStart+9>e.count?e.count:e.pageStart+9," of ",e.count):"",e.paging?s.a.createElement(l,{count:e.count,paging:e.paging,activePage:e.activePage}):"")),s.a.createElement("div",{className:"d-flex justify-content-between mt-2"},e.ospaging?s.a.createElement("div",{className:"pl-2"},"Showing entries ",e.pageStart," to ",e.pageStart+9>e.count?e.count:e.pageStart+9," of ",e.count):"",e.ospaging?s.a.createElement(l,{count:e.count,paging:e.ospaging,activePage:e.activePage}):""))}}}]);
//# sourceMappingURL=12.6da22946.chunk.js.map